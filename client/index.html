<!doctype html>
<html lang="en" ng-app="OpenGroupChat">
  <head>
    <meta charset="UTF-8">
    <title>Open Group Chat</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Page-Enter" content="RevealTrans(Duration=2.0,Transition=2)">
    <meta http-equiv="Page-Exit" content="RevealTrans(Duration=3.0,Transition=12)">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    <meta http-equiv="cleartype" content="on">
    <meta http-equiv="Cache-control" content="private">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="imagetoolbar" content="false">
    <meta name="description" content="Chat between PC's Openly - Nothing is logged anywhere. Ever.">
    <meta name="copyright" content="Copyright 2012 Christopher D Langton">
    <meta name="distribution" content="IU">
    <meta name="revisit-after" content="1 week">
    <meta name="language" content="EN">
    <meta name="no-email-collection" content="http://www.unspam.com/noemailcollection">
    <meta name="contact" content="chris@codewiz.com">
    <meta name="reply-to" content="chris@codewiz.com">
    <meta name="web_author" content="Christopher D. Langton">
    <meta name="image_src" content="/asset/img/facebook.png">
    <meta name="application-name" content="Open Group Chat">
    <meta name="tweetmeme-title" content="Open Group Chat">
    <meta name="summary" content="Chat between PC's Openly - Nothing is logged anywhere. Ever.">
    <meta name="url" content="http://open-group-chat.herokuapp.com/">
    <meta name="msapplication-tooltip" content="Chat between PC's Openly - Nothing is logged anywhere. Ever.">
    <meta name="msapplication-starturl" content="http://open-group-chat.herokuapp.com/">
    <meta name="msapplication-window" content="width=1024;height=768">
    <meta name="msapplication-navbutton-color" content="#D64">
    <meta name="msapplication-TileImage" content="/asset/img/facebook.png">
    <meta name="msapplication-TileColor" content="#D64">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Open Group Chat">
    <meta property="fb:app_id" content="codewiz.biz">
    <meta property="fb:admins" content="chrisdlangton">
    <meta property="og:url" content="http://open-group-chat.herokuapp.com/">
    <meta property="og:image" content="/asset/img/facebook.png">
    <meta property="og:title" content="Chat between PC's Openly - Nothing is logged anywhere. Ever.">
    <meta property="og:description" content="Open Group Chat is a NodeJS project using the latest web technologies to provide fast open collaboration and privacy.">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="http://open-group-chat.herokuapp.com/">
    <meta name="twitter:creator" content="@chrisdlangton">
    <meta name="twitter:site" content="@codewiz_biz">
    <meta name="twitter:title" content="Open Group Chat">
    <meta name="twitter:description" content="Chat between PC's Openly - Nothing is logged anywhere. Ever.">
    <meta name="twitter:image" content="/asset/img/facebook.png">
    <link rel="canonical" href="http://open-group-chat.herokuapp.com/">
    <link rel="icon" href="/asset/img/favicon.ico" sizes="16x16 32x32 48x48 64x64" type="image/vnd.microsoft.icon">
    <link rel="stylesheet" href="/asset/css/main.css">
    <link rel="stylesheet" href="/asset/css/bootstrap.min.css">
    <link rel="stylesheet" href="/asset/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/asset/css/angular-toggle-switch.css">
  </head>
  <body class="background">
    <div id="navbar" class="navbar navbar-default navbar-static-top navbar-inverse hide" role="navigation">
        <div class="navbar-inner">
            <span class="pull-left ogc"><img src="/asset/img/favicon48.png">Open Group Chat</span>
            <div class="pull-right" id="gapi-login">
                <a href="#settings" role="button" class="btn" data-toggle="modal"><span class="glyphicon glyphicon-cog text-danger"></span></a>
                <img id="gapi-image" class="img-circle">
            </div>
        </div>
    </div>
    <!-- Settings Modal -->
    <div id="settings" ng-controller="SettingsController" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Preferences</h4>
                </div>
                <form class="form-horizontal" role="form">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="col-lg-6 control-label">Display Name</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    Handle
                                </span>
                                <input type="text" ng-model="settings.name" placeholder="display name" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-lg-6 control-label">Message Text</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    Color
                                </span>
                                <input type="color" ng-model="settings.color" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-lg-6 control-label">Local History</label>
                            <div class="input-group">
                                <span class="input-group-addon">
                                    Messages
                                </span>
                                <input type="number" min="10" max="100" step="5" ng-model="settings.messages" class="form-control"> 
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-lg-6 control-label">Enable Notifications</label>
                            <div toggle-switch model="settings.notifications"></div>
                        </div>
                        <div ng-show="settings.notifications" class="ng-hide form-group">
                            <label class="col-lg-6 control-label">Announce User Leave Room</label>
                            <div toggle-switch model="settings.leave"></div>
                        </div>
                        <div ng-show="settings.notifications" class="ng-hide form-group">
                            <label class="col-lg-6 control-label">Announce User Join Room</label>
                            <div toggle-switch model="settings.join"></div>
                        </div>
                        <div ng-show="settings.notifications" class="ng-hide form-group">
                            <label class="col-lg-6 control-label">Announce User Login</label>
                            <div toggle-switch model="settings.login"></div>
                        </div>
                        <div ng-show="settings.notifications" class="ng-hide form-group">
                            <label class="col-lg-6 control-label">Announce Lobby Arrivals</label>
                            <div toggle-switch model="settings.lobby"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-danger" ng-click="save()" data-dismiss="modal">Save changes</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <!-- New Room Modal -->
    <div id="newRoom" ng-controller="RoomController" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Create Room</h4>
                </div>
                <form class="form-horizontal" role="form">
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="col-lg-4 control-label">Room Name</label>
                            <div class="col-lg-8">
                                <input type="text" ng-model="room.name" placeholder="Room Name" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-lg-4 control-label">Password Protected</label>
                            <div class="col-lg-8">
                                <div toggle-switch model="room.private"></div>
                            </div>
                        </div>
                        <div ng-show="room.private" class="ng-hide" class="form-group">
                            <label class="col-lg-4 control-label">Password</label>
                            <div class="col-lg-8">
                                <input type="password" ng-model="room.password" placeholder="Password" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-danger" ng-disabled="!room.name" ng-click="save()" data-dismiss="modal">Save Room</button>
                    </div>
                </form>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <img id="ogc-logo" src="/asset/img/open-group-chat-600x200.png" class="img-responsive"><br>
    <a id="authorize-button" style="visibility: hidden"><img class="img-responsive" src="/asset/img/sign-in-with-google.png" width="250" height="55" alt="Sign-In with Google" style="cursor: pointer;"></a>
    <div ng-controller="ChatController" class="container-fluid hide">
        <!-- Join Room Modal -->
        <div id="joinRoom" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Join Room</h4>
                    </div>
                    <form class="form-horizontal" role="form">
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Password</label>
                                <div class="col-lg-8">
                                    <input type="password" ng-model="password" placeholder="Password" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="hidden" ng-model="roomName">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-danger" ng-disabled="!password" ng-click="join()" data-dismiss="modal">Join</button>
                        </div>
                    </form>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
        <!-- Edit Room Modal -->
        <div id="editRoom" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Edit Room</h4>
                    </div>
                    <form class="form-horizontal" role="form">
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Room Name</label>
                                <div class="col-lg-8">
                                    <input type="text" ng-model="editingRoom.name" placeholder="Room Name" class="form-control" ng-disabled="true">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Password Protected</label>
                                <div class="col-lg-8">
                                    <div toggle-switch model="editingRoom.private"></div>
                                </div>
                            </div>
                            <div ng-show="editingRoom.private" class="ng-hide" class="form-group">
                                <label class="col-lg-4 control-label">Password</label>
                                <div class="col-lg-8">
                                    <input type="password" ng-model="editingRoom.password" placeholder="Password" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-danger" ng-click="edit()" data-dismiss="modal">Edit Room</button>
                        </div>
                    </form>
                    <div class="panel panel-danger ng-hide" ng-show="editingRoom.admins.indexOf(profile.gid) >= 0 || editingRoom.creator == profile.gid">
                        <div class="panel-heading">Users</div>
                        <div ng-repeat="user in editingRoom.users" class="panel-body">
                            <img ng-src="{{user.image}}" class="img-circle">&nbsp;
                            <span ng-bind="user.name" style="color:{{user.color}};"></span>&nbsp;
                            <span class="ng-hide" ng-show="user.gid && user.gid != profile.gid && editingRoom.creator != user.gid">
                                <button type="button" role="button" class="btn btn-default ng-hide" ng-show="editingRoom.id != 'Lobby'" ng-click="kick('{{editingRoom.id}}','{{user.id}}')" title="Kick User" ><span class="glyphicon glyphicon-trash"></span></button>&nbsp;
                                <button type="button" role="button" class="btn btn-danger ng-hide" ng-click="makeAdmin('{{editingRoom.id}}','{{user.gid}}')" ng-show="editingRoom.admins.indexOf(user.gid) < 0" title="Make Group Admin" ><span class="glyphicon glyphicon-tower"></span></button>&nbsp;
                                <button type="button" role="button" class="btn btn-warning ng-hide" ng-click="revokeAdmin('{{editingRoom.id}}','{{user.gid}}')" ng-show="editingRoom.admins.indexOf(user.gid) >= 0" title="Revoke Group Admin" ><span class="glyphicon glyphicon-thumbs-down"></span></button>
                            </span>
                        </div>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
        <div class="row">
            <div class="col-md-3 well">
                <div class="panel panel-danger">
                    <div class="panel-heading">Rooms</div>
                        <div ng-repeat="room in rooms" class="panel-body">
                            <div>
                                <button type="button" ng-click="joinRoom('{{room.id}}')" class="btn btn-xs btn-danger ng-hide" title="Join Room" ng-show="profile.room != room.id" ><span class="glyphicon glyphicon-log-in"></span></button>
                                <a href="#editRoom" ng-click="editRoom('{{room.id}}')" role="button" class="btn btn-xs btn-default ng-hide" title="Edit Room" ng-show="profile.gid == room.creator || room.admins.indexOf(profile.gid) >= 0" data-toggle="modal" ><span class="glyphicon glyphicon-cog"></span></a>
                                <span ng-bind="room.name"></span>&nbsp;
                                <span class="glyphicon glyphicon-eye-open"></span>&nbsp;
                                <span class="badge" ng-bind="room.users.length"></span>&nbsp;
                            </div>
                        </div>
                    <a href="#newRoom" role="button" class="btn btn-warning ng-hide" data-toggle="modal" ng-show="profile.gid" ><span class="glyphicon glyphicon-plus"></span>&nbsp;Add Room</a>
                    <div class="panel-heading">Online In {{rooms[profile.room].name}}</div>
                    <div ng-repeat="user in rooms[profile.room].users" class="panel-body">
                        <img ng-src="{{user.image}}" class="img-circle">&nbsp;
                        <span ng-bind="user.name" style="color:{{user.color}};"></span>&nbsp;
                        <button type="button" role="button" class="btn btn-default ng-hide" ng-show="rooms[profile.room].id != 'Lobby' && user.gid && user.gid != profile.gid && rooms[profile.room].creator != user.gid && ( rooms[profile.room].admins.indexOf(profile.gid) >= 0 || rooms[profile.room].creator == profile.gid )" ng-click="kick('{{rooms[user.room].id}}','{{user.id}}')" title="Kick User" ><span class="glyphicon glyphicon-trash"></span></button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div id="messages" class="scrollbar col-md-6">
                    <div ng-repeat="msg in messages">
                        <div class="bubble col-md-10" style="color:{{msg.color}};">
                            <span ng-bind-html="msg.text"></span>
                            <span class="pull-right" style="font-size: 10px;">{{msg.name}} @ {{msg.time}}</span>
                        </div>
                        <img ng-src="{{msg.image}}" class="img-circle pull-right">
                    </div>
                </div>
            </div>
            <div class="col-md-3 well">
                <form ng-submit="send()">
                    <textarea rows="6" ng-model="text" placeholder="Message" class="form-control"></textarea>
                    <button type="submit" ng-disabled="text.length < 3" class="btn btn-danger"><span class="glyphicon glyphicon-share-alt"></span>&nbsp;Share</button>
                    <input type="hidden" value="" ng-model="name">
                    <input type="hidden" value="" ng-model="color">
                    <input type="hidden" value="" ng-model="image">
                </form>
                <div class="panel panel-danger">
                    <div class="panel-heading">Online</div>
                    <div ng-repeat="user in users" class="panel-body">
                        <img ng-src="{{user.image}}" class="img-circle">&nbsp;
                        <span ng-bind="user.name" style="color:{{user.color}};"></span>&nbsp;
                        <span class="glyphicon glyphicon-bullhorn"></span>&nbsp;{{rooms[user.room].name}}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" language="javascript" charset="utf-8" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8">
        socket = io.connect();
    </script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="/asset/js/library/jquery.min.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="/asset/js/library/bootstrap.min.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="/asset/js/library/angular.min.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="/asset/js/library/angular-toggle-switch.min.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="/asset/js/controller/index.js"></script>
    <script type="text/javascript" language="javascript" charset="utf-8" src="/asset/js/static/index.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
  </body>
</html>
