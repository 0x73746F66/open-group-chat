{"ts":1380693453266,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!doctype html>\n<html lang=\"en\" ng-app=\"OpenGroupChat\">\n  <head>\n    <title>Open Group Chat</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"description\" content=\"Chat between PC's Openly - Nothing is logged anywhere. Ever.\">\n    <link rel=\"icon\" href=\"/asset/img/favicon.ico\" sizes=\"16x16 32x32 48x48 64x64\" type=\"image/vnd.microsoft.icon\">\n    <link rel=\"stylesheet\" href=\"/asset/css/main.css\">\n    <link rel=\"stylesheet\" href=\"/asset/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"/asset/css/bootstrap-theme.min.css\">\n    <link rel=\"stylesheet\" href=\"/asset/css/angular-toggle-switch.css\">\n  </head>\n  <body class=\"loading\">\n    <div class=\"navbar navbar-default navbar-static-top navbar-inverse\" role=\"navigation\">\n        <div class=\"navbar-inner\">\n            <span class=\"pull-left ogc\"><img src=\"/asset/img/favicon48.png\">Open Group Chat</span>\n            <div class=\"pull-right\">\n                <a href=\"#settings\" role=\"button\" class=\"btn\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-cog\"></span></a>\n            </div>\n            <div class=\"pull-right\" id=\"gapi-login\">\n                <a id=\"authorize-button\" style=\"visibility: hidden\"><img src=\"/asset/img/sign-in-with-google.png\" width=\"250\" height=\"55\" alt=\"Sign-In with Google\" style=\"cursor: pointer;\"></a>\n                <img id=\"gapi-image\" class=\"img-circle\">\n            </div>\n        </div>\n    </div>\n    <!-- Settings Modal -->\n    <div id=\"settings\" ng-controller=\"SettingsController\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                    <h4 class=\"modal-title\">Preferences</h4>\n                </div>\n                <form class=\"form-horizontal\" role=\"form\">\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Enable Notifications</label>\n                            <div toggle-switch model=\"settings.notifications\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce User Leave Room</label>\n                            <div toggle-switch model=\"settings.leave\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce User Join Room</label>\n                            <div toggle-switch model=\"settings.join\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce User Login</label>\n                            <div toggle-switch model=\"settings.login\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce Lobby Arrivals</label>\n                            <div toggle-switch model=\"settings.lobby\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Local Message History</label>\n                            <input type=\"number\" min=\"10\" max=\"100\" step=\"5\" ng-model=\"settings.messages\"> \n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                        <button type=\"button\" class=\"btn btn-warning\" ng-click=\"save()\" data-dismiss=\"modal\">Save changes</button>\n                    </div>\n                </form>\n            </div><!-- /.modal-content -->\n        </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n    <!-- New Room Modal -->\n    <div id=\"newRoom\" ng-controller=\"RoomController\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                    <h4 class=\"modal-title\">Create Room</h4>\n                </div>\n                <form class=\"form-horizontal\" role=\"form\">\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            <label class=\"col-lg-4 control-label\">Room Name</label>\n                            <div class=\"col-lg-8\">\n                                <input type=\"text\" ng-model=\"room.name\" placeholder=\"Room Name\" class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"col-lg-4 control-label\">Password Protected</label>\n                            <div class=\"col-lg-8\">\n                                <div toggle-switch model=\"room.private\"></div>\n                            </div>\n                        </div>\n                        <div ng-show=\"room.private\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-4 control-label\">Password</label>\n                            <div class=\"col-lg-8\">\n                                <input type=\"password\" ng-model=\"room.password\" placeholder=\"Password\" class=\"form-control\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                        <button type=\"button\" class=\"btn btn-warning\" ng-disabled=\"!room.name\" ng-click=\"save()\" data-dismiss=\"modal\">Save Room</button>\n                    </div>\n                </form>\n            </div><!-- /.modal-content -->\n        </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n    <div ng-controller=\"ChatController\" class=\"container-fluid hide\">\n        <!-- Join Room Modal -->\n        <div id=\"joinRoom\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                        <h4 class=\"modal-title\">Join Room</h4>\n                    </div>\n                    <form class=\"form-horizontal\" role=\"form\">\n                        <div class=\"modal-body\">\n                            <div class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Password</label>\n                                <div class=\"col-lg-8\">\n                                    <input type=\"password\" ng-model=\"password\" placeholder=\"Password\" class=\"form-control\">\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <input type=\"hidden\" ng-model=\"roomName\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                            <button type=\"button\" class=\"btn btn-warning\" ng-disabled=\"!password\" ng-click=\"join()\" data-dismiss=\"modal\">Join</button>\n                        </div>\n                    </form>\n                </div><!-- /.modal-content -->\n            </div><!-- /.modal-dialog -->\n        </div><!-- /.modal -->\n        <!-- Edit Room Modal -->\n        <div id=\"editRoom\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                        <h4 class=\"modal-title\">Edit Room</h4>\n                    </div>\n                    <form class=\"form-horizontal\" role=\"form\">\n                        <div class=\"modal-body\">\n                            <div class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Room Name</label>\n                                <div class=\"col-lg-8\">\n                                    <input type=\"text\" ng-model=\"editingRoom.name\" placeholder=\"Room Name\" class=\"form-control\" ng-disabled=\"true\">\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Password Protected</label>\n                                <div class=\"col-lg-8\">\n                                    <div toggle-switch model=\"editingRoom.private\"></div>\n                                </div>\n                            </div>\n                            <div ng-show=\"editingRoom.private\" class=\"ng-hide\" class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Password</label>\n                                <div class=\"col-lg-8\">\n                                    <input type=\"password\" ng-model=\"editingRoom.password\" placeholder=\"Password\" class=\"form-control\">\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                            <button type=\"button\" class=\"btn btn-warning\" ng-click=\"edit()\" data-dismiss=\"modal\">Edit Room</button>\n                        </div>\n                    </form>\n                </div><!-- /.modal-content -->\n            </div><!-- /.modal-dialog -->\n        </div><!-- /.modal -->\n        <div class=\"row\">\n            <div class=\"col-md-3 well\">\n                <a href=\"#newRoom\" role=\"button\" class=\"btn btn-warning\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-plus\"></span>&nbsp;Add Room</a>\n                <br>\n                <div class=\"panel panel-warning\">\n                    <div class=\"panel-heading\">Rooms</div>\n                        <div ng-repeat=\"room in rooms\" class=\"panel-body\">\n                            <div>\n                                <button type=\"button\" ng-click=\"joinRoom('{{room.name}}')\" class=\"btn btn-xs btn-success ng-hide\" title=\"Join Room\" ng-show=\"profile.room.toLowerCase() != room.name.toLowerCase()\" ><span class=\"glyphicon glyphicon-log-in\"></span></button>\n                                <a href=\"#editRoom\" ng-click=\"editRoom('{{room.name}}')\" role=\"button\" class=\"btn btn-xs btn-warning ng-hide\" title=\"Edit Room\" ng-show=\"profile.id == room.createdId\" data-toggle=\"modal\" ><span class=\"glyphicon glyphicon-cog\"></span></a>\n                                <span ng-bind=\"room.name\"></span>&nbsp;\n                                <span class=\"glyphicon glyphicon-eye-open\"></span>&nbsp;\n                                <span class=\"badge\" ng-bind=\"room.joined\"></span>&nbsp;\n                            </div>\n                        </div>\n                    <div class=\"panel-heading\">Online</div>\n                    <div ng-repeat=\"user in users\" class=\"panel-body\">\n                        <img ng-src=\"{{user.image}}\" class=\"img-circle\">&nbsp;<span ng-bind=\"user.name\" style=\"color:{{user.color}};\"></span>&nbsp;<span class=\"glyphicon glyphicon-bullhorn\"></span>&nbsp;{{user.room}}\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-6\">\n                <div id=\"messages\" class=\"scrollbar col-md-6\">\n                    <div ng-repeat=\"msg in messages\">\n                        <div class=\"bubble col-md-10\" style=\"color:{{msg.color}};\">\n                            <span ng-bind-html=\"msg.text\"></span>\n                            <span class=\"pull-right\" style=\"font-size: 10px;\">{{msg.name}} @ {{msg.time}}</span>\n                        </div>\n                        <img ng-src=\"{{msg.image}}\" class=\"img-circle pull-right\">\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-3 well\">\n                <form ng-submit=\"send()\">\n                    <div class=\"input-group\">\n                        <span class=\"input-group-addon\">\n                            Handle\n                        </span>\n                        <input type=\"text\" ng-model=\"name\" ng-change=\"setName()\" placeholder=\"display name\" class=\"form-control\">\n                    </div>\n                    <textarea rows=\"6\" ng-model=\"text\" placeholder=\"Message\" class=\"form-control\"></textarea>\n                    <div class=\"input-group\">\n                        <span class=\"input-group-addon\">\n                            Color\n                        </span>\n                        <input type=\"color\" ng-model=\"color\" ng-change=\"setColor()\" class=\"form-control\">\n                    </div>\n                    <button type=\"submit\" ng-disabled=\"text.length < 2\" class=\"btn btn-warning\"><span class=\"glyphicon glyphicon-share-alt\"></span>&nbsp;Share</button>\n                    <input type=\"hidden\" value=\"\" ng-model=\"image\">\n                </form>\n            </div>\n        </div>\n    </div>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/socket.io/socket.io.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\">\n        socket = io.connect();\n    </script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/asset/js/library/jquery.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/asset/js/library/bootstrap.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/asset/js/library/angular.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/asset/js/library/angular-toggle-switch.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/asset/js/controller/index.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/asset/js/static/index.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/asset/js/auth/google.js\"></script>\n    <script src=\"https://apis.google.com/js/client.js?onload=handleClientLoad\"></script>\n  </body>\n</html>\n"]],"start1":0,"start2":0,"length1":0,"length2":15073}]],"length":15073}
{"ts":1380693469003,"patch":[[{"diffs":[[0,"an>\n"],[-1,"            <div class=\"pull-right\">\n                <a href=\"#settings\" role=\"button\" class=\"btn\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-cog\"></span></a>\n            </div>\n"],[0,"    "]],"start1":909,"start2":909,"length1":196,"length2":8},{"diffs":[[0,"         </div>\n"],[1,"            <div class=\"pull-right\">\n                <a href=\"#settings\" role=\"button\" class=\"btn\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-cog\"></span></a>\n            </div>\n"],[0,"        </div>\n "]],"start1":1220,"start2":1220,"length1":32,"length2":220}]],"length":15073,"saved":false}
{"ts":1380693480640,"patch":[[{"diffs":[[0,"on glyphicon-cog"],[1," text-warning"],[0,"\"></span></a>\n  "]],"start1":1375,"start2":1375,"length1":32,"length2":45}]],"length":15086,"saved":false}
{"ts":1380693501714,"patch":[[{"diffs":[[0,"api-login\">\n"],[1,"                <a href=\"#settings\" role=\"button\" class=\"btn\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-cog text-warning\"></span></a>\n"],[0,"            "]],"start1":954,"start2":954,"length1":24,"length2":169},{"diffs":[[0,"iv>\n"],[-1,"            <div class=\"pull-right\">\n                <a href=\"#settings\" role=\"button\" class=\"btn\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-cog text-warning\"></span></a>\n            </div>\n"],[0,"    "]],"start1":1377,"start2":1377,"length1":209,"length2":8}]],"length":15030,"saved":false}
