{"ts":1380588951275,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!doctype html>\n<html lang=\"en\" ng-app=\"OpenGroupChat\">\n  <head>\n    <title>Open Group Chat</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"description\" content=\"Chat between PC's Openly - Nothing is logged anywhere. Ever.\">\n    <link rel=\"stylesheet\" href=\"/css/main.css\">\n    <link rel=\"stylesheet\" href=\"/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"/css/bootstrap-theme.min.css\">\n    <link rel=\"stylesheet\" href=\"/css/angular-toggle-switch.css\">\n  </head>\n  <body class=\"loading\">\n    <div class=\"navbar navbar-default navbar-static-top navbar-inverse\" role=\"navigation\">\n        <div class=\"navbar-inner\">\n            <span class=\"pull-left ogc\">Open Group Chat</span>\n            <div class=\"pull-right\" id=\"gapi-login\">\n                <a href=\"#settings\" role=\"button\" class=\"btn\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-cog\"></span></a>\n                <button id=\"authorize-button\" style=\"visibility: hidden\" class=\"btn btn-primary\">Login</button>\n                <img id=\"gapi-image\" class=\"img-circle\">\n            </div>\n        </div>\n    </div>\n    <!-- Settings Modal -->\n    <div id=\"settings\" ng-controller=\"SettingsController\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                    <h4 class=\"modal-title\">Preferences</h4>\n                </div>\n                <form class=\"form-horizontal\" role=\"form\">\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Enable Notifications</label>\n                            <div toggle-switch model=\"settings.notifications\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce User Leave Room</label>\n                            <div toggle-switch model=\"settings.leave\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce User Join Room</label>\n                            <div toggle-switch model=\"settings.join\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce User Login</label>\n                            <div toggle-switch model=\"settings.login\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Announce Lobby Arrivals</label>\n                            <div toggle-switch model=\"settings.lobby\"></div>\n                        </div>\n                        <div ng-show=\"settings.notifications\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-6 control-label\">Local Message History</label>\n                            <input type=\"number\" min=\"10\" max=\"100\" step=\"5\" ng-model=\"settings.messages\"> \n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                        <button type=\"button\" class=\"btn btn-primary\" ng-click=\"save()\" data-dismiss=\"modal\">Save changes</button>\n                    </div>\n                </form>\n            </div><!-- /.modal-content -->\n        </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n    <!-- New Room Modal -->\n    <div id=\"newRoom\" ng-controller=\"RoomController\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                    <h4 class=\"modal-title\">Create Room</h4>\n                </div>\n                <form class=\"form-horizontal\" role=\"form\">\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            <label class=\"col-lg-4 control-label\">Room Name</label>\n                            <div class=\"col-lg-8\">\n                                <input type=\"text\" ng-model=\"room.name\" placeholder=\"Room Name\" class=\"form-control\">\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label class=\"col-lg-4 control-label\">Password Protected</label>\n                            <div class=\"col-lg-8\">\n                                <div toggle-switch model=\"room.private\"></div>\n                            </div>\n                        </div>\n                        <div ng-show=\"room.private\" class=\"ng-hide\" class=\"form-group\">\n                            <label class=\"col-lg-4 control-label\">Password</label>\n                            <div class=\"col-lg-8\">\n                                <input type=\"password\" ng-model=\"room.password\" placeholder=\"Password\" class=\"form-control\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                        <button type=\"button\" class=\"btn btn-primary\" ng-disabled=\"!room.name\" ng-click=\"save()\" data-dismiss=\"modal\">Save Room</button>\n                    </div>\n                </form>\n            </div><!-- /.modal-content -->\n        </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n    <div ng-controller=\"ChatController\" class=\"container-fluid hide\">\n        <!-- Join Room Modal -->\n        <div id=\"joinRoom\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                        <h4 class=\"modal-title\">Join Room</h4>\n                    </div>\n                    <form class=\"form-horizontal\" role=\"form\">\n                        <div class=\"modal-body\">\n                            <div class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Password</label>\n                                <div class=\"col-lg-8\">\n                                    <input type=\"password\" ng-model=\"password\" placeholder=\"Password\" class=\"form-control\">\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <input type=\"hidden\" ng-model=\"roomName\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                            <button type=\"button\" class=\"btn btn-primary\" ng-disabled=\"!password\" ng-click=\"join()\" data-dismiss=\"modal\">Join</button>\n                        </div>\n                    </form>\n                </div><!-- /.modal-content -->\n            </div><!-- /.modal-dialog -->\n        </div><!-- /.modal -->\n        <!-- Edit Room Modal -->\n        <div id=\"editRoom\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n                        <h4 class=\"modal-title\">Edit Room</h4>\n                    </div>\n                    <form class=\"form-horizontal\" role=\"form\">\n                        <div class=\"modal-body\">\n                            <div class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Room Name</label>\n                                <div class=\"col-lg-8\">\n                                    <input type=\"text\" ng-model=\"editingRoom.name\" placeholder=\"Room Name\" class=\"form-control\" ng-disabled=\"true\">\n                                </div>\n                            </div>\n                            <div class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Password Protected</label>\n                                <div class=\"col-lg-8\">\n                                    <div toggle-switch model=\"editingRoom.private\"></div>\n                                </div>\n                            </div>\n                            <div ng-show=\"editingRoom.private\" class=\"ng-hide\" class=\"form-group\">\n                                <label class=\"col-lg-4 control-label\">Password</label>\n                                <div class=\"col-lg-8\">\n                                    <input type=\"password\" ng-model=\"editingRoom.password\" placeholder=\"Password\" class=\"form-control\">\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>\n                            <button type=\"button\" class=\"btn btn-primary\" ng-click=\"edit()\" data-dismiss=\"modal\">Edit Room</button>\n                        </div>\n                    </form>\n                </div><!-- /.modal-content -->\n            </div><!-- /.modal-dialog -->\n        </div><!-- /.modal -->\n        <div class=\"row\">\n            <div class=\"col-md-3 well\">\n                <a href=\"#newRoom\" role=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\"><span class=\"glyphicon glyphicon-plus\"></span>&nbsp;Add Room</a>\n                <br>\n                <div class=\"panel panel-info\">\n                    <div class=\"panel-heading\">Rooms</div>\n                        <div ng-repeat=\"room in rooms\" class=\"panel-body\">\n                            <div>\n                                <button type=\"button\" ng-click=\"joinRoom('{{room.name}}')\" class=\"btn btn-xs btn-success ng-hide\" title=\"Join Room\" ng-show=\"profile.room.toLowerCase() != room.name.toLowerCase()\" ><span class=\"glyphicon glyphicon-log-in\"></span></button>\n                                <a href=\"#editRoom\" ng-click=\"editRoom('{{room.name}}')\" role=\"button\" class=\"btn btn-xs btn-info ng-hide\" title=\"Edit Room\" ng-show=\"profile.id == room.createdId\" data-toggle=\"modal\" ><span class=\"glyphicon glyphicon-cog\"></span></a>\n                                <span ng-bind=\"room.name\"></span>&nbsp;\n                                <span class=\"glyphicon glyphicon-eye-open\"></span>&nbsp;\n                                <span class=\"badge\" ng-bind=\"room.joined\"></span>&nbsp;\n                            </div>\n                        </div>\n                    <div class=\"panel-heading\">Online</div>\n                    <div ng-repeat=\"user in users\" class=\"panel-body\">\n                        <img ng-src=\"{{user.image}}\" class=\"img-circle\">&nbsp;<span ng-bind=\"user.name\" style=\"color:{{user.color}};\"></span>&nbsp;<span class=\"glyphicon glyphicon-bullhorn\"></span>&nbsp;{{user.room}}\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-6\">\n                <div id=\"messages\" class=\"scrollbar col-md-6\">\n                    <div ng-repeat=\"msg in messages\">\n                        <div class=\"bubble col-md-10\" style=\"color:{{msg.color}};\">\n                            <span ng-bind-html=\"msg.text\"></span>\n                            <span class=\"pull-right\" style=\"font-size: 10px;\">{{msg.name}} @ {{msg.time}}</span>\n                        </div>\n                        <img ng-src=\"{{msg.image}}\" class=\"img-circle pull-right\">\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-3 well\">\n                <form ng-submit=\"send()\">\n                    <div class=\"input-group\">\n                        <span class=\"input-group-addon\">\n                            Handle\n                        </span>\n                        <input type=\"text\" ng-model=\"name\" ng-change=\"setName()\" placeholder=\"display name\" class=\"form-control\">\n                    </div>\n                    <textarea rows=\"6\" ng-model=\"text\" placeholder=\"Message\" class=\"form-control\"></textarea>\n                    <div class=\"input-group\">\n                        <span class=\"input-group-addon\">\n                            Color\n                        </span>\n                        <input type=\"color\" ng-model=\"color\" ng-change=\"setColor()\" class=\"form-control\">\n                    </div>\n                    <button type=\"submit\" ng-disabled=\"text.length < 2\" class=\"btn btn-primary\"><span class=\"glyphicon glyphicon-share-alt\"></span>&nbsp;Share</button>\n                    <input type=\"hidden\" value=\"\" ng-model=\"image\">\n                </form>\n            </div>\n        </div>\n    </div>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/socket.io/socket.io.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/js/jquery.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/js/bootstrap.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/js/angular.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/js/angular-toggle-switch.min.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\">\n        socket = io.connect();\n    </script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\" src=\"/js/chat-controller.js\"></script>\n    <script type=\"text/javascript\" language=\"javascript\" charset=\"utf-8\">\n    $(document).ready(function() {\n        window.ogc = {};\n        var ogc = window.ogc;\n        if (navigator.mozNotification) {\n            ogc.notifications = navigator.mozNotification;\n        } else if (window.webkitNotifications) {\n            ogc.notifications = window.webkitNotifications\n        }\n        if (ogc.notifications) {\n            ogc.level = ogc.notifications.checkPermission();\n        }\n\n        jQuery( 'textarea[ng-model=\"text\"]' ).bind('keypress', function(e){\n            if ( e.keyCode == 13 ) {\n                e.preventDefault();\n                jQuery(this).submit();\n            }\n        });\n\n        $(window).resize(function() {\n            if ($(window).width()>=975) {\n                $('.noScroll').each(function(){\n                    $(this).removeClass('noScroll').addClass('scrollbar');\n                });\n            }\n            else {\n                $('.scrollbar').each(function(){\n                    $(this).removeClass('scrollbar').addClass('noScroll');\n                });\n            }\n        });\n    });\n    </script>\n    <script src=\"/js/google-auth.js\"></script>\n    <script src=\"https://apis.google.com/js/client.js?onload=handleClientLoad\"></script>\n  </body>\n</html>\n"]],"start1":0,"start2":0,"length1":0,"length2":15658}]],"length":15658}
